## 矩
🎯 什么是“矩”？
矩（Moment）是用来描述随机变量分布特征的量，尤其是它的位置、形状、偏斜程度和峰度。  

|名称|数学表达式|说明
|---|---|---
|原点矩|自己去查|关于原点的 k 阶矩
|中心矩|同上|关于均值的 k 阶矩
|一阶矩|𝐸[𝑋]|即数学期望，衡量平均值
|二阶中心矩|𝐸[(𝑋−𝜇)**2]|即方差，衡量波动性
|三阶中心矩|同上|衡量偏度（分布是否偏左偏右）
|四阶中心矩|同上|衡量峰度（分布是否尖或平）

---
## 常见离散型分布
### 二项分布
`P(X = k) = (n! / (k! × (n - k)!)) × p^k × (1 - p)^(n - k)`

例题：90台独立设备，故障概率是0.01，3个人维护，
一种方案是每人30台，另一种是3人一起维护90台，试比较不能及时维修的概率大小  
思路：🧮 策略一：每人维护30台（分散维护）
每人维护 30 台设备，故障概率为 0.01。我们用二项分布：

𝑋∼Binomial(𝑛=30,𝑝=0.01)
计算每人不能及时维修的概率（即故障数 ≥ 2）：
𝑃(𝑋≥2)=1−𝑃(𝑋=0)−𝑃(𝑋=1)
𝑃(𝑋=0)=(0.99)**30≈0.7397
𝑃(𝑋=1)=𝐶(30,1)⋅0.01⋅(0.99)**29≈0.2217
所以 
𝑃(𝑋≥2)≈1−0.7397−0.2217=0.0386，
每人不能及时维修的概率约为 3.86% 三人中至少一人不能及时维修的概率（近似）：

𝑃(至少一人失败)≈1−(1−0.0386)**3≈0.1135

策略二：三人一起维护90台（集中维护）
三人协同维护 90 台设备，最多能及时维修 3 台。我们计算：

𝑌∼Binomial(𝑛=90,𝑝=0.01)

计算 
𝑃(𝑌≥4)=1−𝑃(𝑌=0)−𝑃(𝑌=1)−𝑃(𝑌=2)−𝑃(𝑌=3)

𝑃(𝑌=0)=(0.99)**90≈0.4066
𝑃(𝑌=1)≈0.3693
...
𝑃(𝑌=3)≈0.0451
所以 
𝑃(𝑌≥4)≈1−(0.4066+0.3693+0.1660+0.0451)=0.0130

集中维护下不能及时维修的概率约为 1.30%,

🐍 Python 实现
```python
from scipy.stats import binom   #处理二项分布的对象
import matplotlib.pyplot as plt

# 参数
n1 = 30  # 每人维护设备数
n2 = 90  # 三人协同维护设备数
p = 0.01  # 故障概率

# 方案一：每人维护30台，最多能处理1台故障
# 计算每人不能及时维修的概率（故障数 ≥ 2）
fail_prob_individual = 1 - binom.pmf(0, n1, p) - binom.pmf(1, n1, p)
# 三人中至少一人失败的概率（近似）
fail_prob_scheme1 = 1 - (1 - fail_prob_individual)**3

# 方案二：三人一起维护90台，最多能处理3台故障
fail_prob_scheme2 = 1 - sum([binom.pmf(k, n2, p) for k in range(4)])

# 输出结果
print(f"方案一（分散维护）不能及时维修概率 ≈ {fail_prob_scheme1:.4f}")
print(f"方案二（集中维护）不能及时维修概率 ≈ {fail_prob_scheme2:.4f}")

# 可视化
x = range(0, 10)
y1 = [binom.pmf(k, n1, p) for k in x]
y2 = [binom.pmf(k, n2, p) for k in x]

plt.figure(figsize=(10, 5))
plt.plot(x, y1, 'o-', label='每人维护30台设备的故障分布')
plt.plot(x, y2, 's-', label='三人维护90台设备的故障分布')
plt.axvline(2, color='gray', linestyle='--', label='个人维修能力阈值')
plt.axvline(4, color='red', linestyle='--', label='团队维修能力阈值')
plt.xlabel('故障设备数')
plt.ylabel('概率')
plt.title('两种维护方案下的故障分布比较')
plt.legend()
plt.grid(True)
plt.tight_layout()
plt.show()
```

---
由于是计算随机变量大于某个值的概率分布，因此可以使用生存函数来计算
🐍 Python代码（使用生存函数）
```python
from scipy.stats import binom

# 故障概率
p = 0.01

# 方案一：每人维护30台，不能及时维修 = P(X ≥ 2)
fail_prob_individual = binom.sf(1, 30, p)  # k=1,n=30,p=0.01
# 三人中至少一人失败（近似）
fail_prob_scheme1 = 1 - (1 - fail_prob_individual)**3

# 方案二：三人一起维护90台，不能及时维修 = P(Y ≥ 4)
fail_prob_scheme2 = binom.sf(3, 90, p)

# 输出结果
print(f"方案一（分散维护）不能及时维修概率 ≈ {fail_prob_scheme1:.4f}")
print(f"方案二（集中维护）不能及时维修概率 ≈ {fail_prob_scheme2:.4f}")
```

📌 参数解释
|参数|	含义
|---|---
|1|	表示我们要计算 𝑃(𝑋≥2)，所以用 sf(1)（即 𝑃(𝑋>1)）
|30|	表示试验次数，也就是每人维护的设备数量
|p|	每台设备的故障概率，题目中是 0.01

🧠 为什么是 sf(1) 而不是 sf(2)？
因为生存函数的定义是：

sf(𝑘)=𝑃(𝑋>𝑘)=𝑃(𝑋≥𝑘+1)
所以：

sf(1) = 𝑃(𝑋≥2)

sf(2) = 𝑃(𝑋≥3)

我们关心的是“不能及时维修”，即故障数 ≥ 2，所以用 sf(1)。
✅ 总结一句话
```python
fail_prob_individual = binom.sf(1, 30, p)
```
表示：一个人维护 30 台设备，每台故障概率为 0.01，至少有 2 台设备故障的概率。

---
用` scipy.stats.binom.pmf(k, n, p)` 来计算：

```python
from scipy.stats import binom

# 故障概率
p = 0.01

# 方案一：每人维护30台设备
n_individual = 30
# P(X = 0) + P(X = 1)
p0 = binom.pmf(0, n_individual, p)
p1 = binom.pmf(1, n_individual, p)
# P(X ≥ 2) = 1 - P(X = 0) - P(X = 1)
fail_prob_individual = 1 - p0 - p1
# 三人中至少一人失败（近似）
fail_prob_scheme1 = 1 - (1 - fail_prob_individual)**3

# 方案二：三人一起维护90台设备
n_total = 90
# P(Y = 0) + P(Y = 1) + P(Y = 2) + P(Y = 3)
p_total = sum([binom.pmf(k, n_total, p) for k in range(4)])
# P(Y ≥ 4) = 1 - P(Y ≤ 3)
fail_prob_scheme2 = 1 - p_total

# 输出结果
print(f"方案一（分散维护）不能及时维修概率 ≈ {fail_prob_scheme1:.4f}")
print(f"方案二（集中维护）不能及时维修概率 ≈ {fail_prob_scheme2:.4f}")

```

---
用 CDF（累积分布函数） 来计算两种维修方案
📐 CDF 的定义（离散型随机变量）
```text
CDF（累积分布函数）定义为：
P(X ≤ k) = F(k) = Σ [P(X = x)]，其中 x 从最小值到 k

也就是：
F(k) = P(X ≤ k) = P(X = 0) + P(X = 1) + ... + P(X = k)
```
它表示：随机变量 X 小于等于某个值 k 的概率。
  
🐍 Python代码：用 CDF 实现
```python
from scipy.stats import binom

# 故障概率
p = 0.01

# 方案一：每人维护30台设备，不能及时维修 = P(X ≥ 2)
fail_prob_individual = 1 - binom.cdf(1, 30, p)
# 三人中至少一人失败（近似）
fail_prob_scheme1 = 1 - (1 - fail_prob_individual)**3

# 方案二：三人一起维护90台设备，不能及时维修 = P(Y ≥ 4)
fail_prob_scheme2 = 1 - binom.cdf(3, 90, p)

# 输出结果
print(f"方案一（分散维护）不能及时维修概率 ≈ {fail_prob_scheme1:.4f}")
print(f"方案二（集中维护）不能及时维修概率 ≈ {fail_prob_scheme2:.4f}")
```
